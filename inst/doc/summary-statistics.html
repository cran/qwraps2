<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Peter DeWitt" />

<meta name="date" content="2016-12-18" />

<title>Formatted Summary Statistics and Data Summary Tables with qwraps2</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Formatted Summary Statistics and Data Summary Tables with qwraps2</h1>
<h4 class="author"><em>Peter DeWitt</em></h4>
<h4 class="date"><em>2016-12-18</em></h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>It is common for a manuscript to require a data summary table. Simple summary statistics for the whole sample and for subgroups therein. There are many tools available for easing the difficulty involved in building such tables. It is my opinion, that most of these tool exists with sufficient implicit biases and nuances imposed by the authors of the tools that other users need to not only understand the tool, but to think like the author. I find myself approaching many problems in ways that few others do. As a result, I needed my own tool for building data summary tables. I hope you like these tools and will be able to use it in your work.</p>
<p>This vignette presents the use of the <code>summary_table</code>, <code>tab_summary</code>, and <code>qable</code> functions for quickly building data summary tables. These functions implicitly use the <code>mean_sd</code>, <code>median_iqr</code>, and <code>n_perc0</code> functions from <code>qwraps2</code> as well.</p>
<div id="prerequisites-example-data-set" class="section level2">
<h2>Prerequisites Example Data Set</h2>
<p>We will use a modified version of the <code>mtcars</code> data set for examples throughout this vignette. The following packages are required to run the code in this vignette and to construct the <code>mtcars2</code> <code>data.frame</code>.</p>
<p>The <code>mtcars2</code> data frame will have three versions of the <code>cyl</code> vector, the original numeric values in <code>cyl</code>, a <code>character</code> version, and a <code>factor</code> version.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
## 
## Attaching package: 'dplyr'
## The following objects are masked from 'package:stats':
## 
##     filter, lag
## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union
<span class="kw">library</span>(qwraps2)

<span class="co"># define the markup language we are working in.</span>
<span class="co"># options(qwraps2_markup = &quot;latex&quot;) is also supported.</span>
<span class="kw">options</span>(<span class="dt">qwraps2_markup =</span> <span class="st">&quot;markdown&quot;</span>)

<span class="kw">data</span>(mtcars)

mtcars2 &lt;-<span class="st"> </span>
<span class="st">  </span>dplyr::<span class="kw">mutate</span>(mtcars,
                <span class="dt">cyl_factor =</span> <span class="kw">factor</span>(cyl, 
                                    <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">8</span>), 
                                    <span class="dt">labels =</span> <span class="kw">paste</span>(<span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">8</span>), <span class="st">&quot;cylinders&quot;</span>)),
                <span class="dt">cyl_character =</span> <span class="kw">paste</span>(cyl, <span class="st">&quot;cylinders&quot;</span>))

<span class="kw">str</span>(mtcars2)
## 'data.frame':    32 obs. of  13 variables:
##  $ mpg          : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl          : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp         : num  160 160 108 258 360 ...
##  $ hp           : num  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat         : num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt           : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec         : num  16.5 17 18.6 19.4 17 ...
##  $ vs           : num  0 0 1 1 0 1 0 1 1 1 ...
##  $ am           : num  1 1 1 0 0 0 0 0 0 0 ...
##  $ gear         : num  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb         : num  4 4 1 1 2 1 4 2 2 4 ...
##  $ cyl_factor   : Factor w/ 3 levels &quot;6 cylinders&quot;,..: 1 1 2 1 3 1 3 2 2 1 ...
##  $ cyl_character: chr  &quot;6 cylinders&quot; &quot;6 cylinders&quot; &quot;4 cylinders&quot; &quot;6 cylinders&quot; ...</code></pre></div>
<p>Notice that in the construction of the <code>cyl_factor</code> and <code>cyl_character</code> vectors was done such that the coercion of <code>cyl_character</code> to a <code>factor</code> will not be the same as the <code>cyl_factor</code> vector, the levels are in a different order.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(mtcars2, <span class="kw">table</span>(cyl_factor, cyl_character))
##              cyl_character
## cyl_factor    4 cylinders 6 cylinders 8 cylinders
##   6 cylinders           0           7           0
##   4 cylinders          11           0           0
##   8 cylinders           0           0          14
<span class="kw">with</span>(mtcars2, <span class="kw">all.equal</span>(<span class="kw">factor</span>(cyl_character), cyl_factor))
## [1] &quot;Attributes: &lt; Component \&quot;levels\&quot;: 2 string mismatches &gt;&quot;</code></pre></div>
</div>
</div>
<div id="review-of-summary-statistic-functions-and-formatting" class="section level1">
<h1>Review of Summary Statistic Functions and Formatting</h1>
<p>Let’s review some of the formatting functions provided by the <code>qwraps2</code> package</p>
<div id="means-and-standard-deviations" class="section level2">
<h2>Means and Standard Deviations</h2>
<p><code>mean_sd</code> will return the (arithmetic) mean and standard deviation for numeric vector, i.e., <code>mean_sd(mtcars2$mpg)</code> will return the formatted string.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean_sd</span>(mtcars2$mpg)
## [1] &quot;20.09 &amp;plusmn; 6.03&quot;
<span class="kw">mean_sd</span>(mtcars2$mpg, <span class="dt">denote_sd =</span> <span class="st">&quot;paren&quot;</span>) 
## [1] &quot;20.09 (6.03)&quot;</code></pre></div>
<p>The default setting for <code>mean_sd</code> is to return the mean ± sd. In a table this default is helpful sense the default formating for counts and percentages is n (%).</p>
<p>The <code>mean_sd</code>, and other functions, are helpful for in-line text too:</p>
<blockquote>
<p>The <code>nrow(mtcars2)</code> vehicles in the <code>mtcars</code> data set had an average fuel economy of `mean_sd(mtcars$mpg) miles per gallon.</p>
</blockquote>
<p>produces</p>
<blockquote>
<p>The 32 vehicles in the <code>mtcars</code> data set had an average fuel economy of 20.09 ± 6.03 miles per gallon.</p>
</blockquote>
</div>
<div id="mean-and-confidence-intervals" class="section level2">
<h2>Mean and Confidence intervals</h2>
<p>If you need the mean and a confidence interval there is <code>mean_ci</code>. <code>mean_ci</code> returns a <code>qwraps2_mean_ci</code> object which is a named vector with the mean, lower confidence limit, and the upper confidence limit. There printing method for <code>qwraps2_mean_ci</code> objects is a call to the <code>frmtci</code> function. You an modify the formating of printed result via adjusting the arguments pasted to <code>frmtci</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mci &lt;-<span class="st"> </span><span class="kw">mean_ci</span>(mtcars2$mpg)
mci
## [1] &quot;20.09 (18.00, 22.18)&quot;
<span class="kw">print</span>(mci, <span class="dt">show_level =</span> <span class="ot">TRUE</span>)
## [1] &quot;20.09 (95% CI: 18.00, 22.18)&quot;</code></pre></div>
</div>
<div id="median-and-inner-quartile-range" class="section level2">
<h2>Median and Inner Quartile Range</h2>
<p>Similar to the <code>mean_sd</code> function, the <code>median_iqr</code> returns the median and the inner quartile range (IQR) of a data vector.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median_iqr</span>(mtcars2$mpg)
## [1] &quot;19.20 (15.43, 22.80)&quot;</code></pre></div>
</div>
<div id="count-and-percentages" class="section level2">
<h2>Count and Percentages</h2>
<p>The <code>n_perc</code> function is the workhorse, but <code>n_perc0</code> is also provided for ease of use in the same way that base R has <code>paste</code> and <code>paste0</code>. <code>n_perc</code> returns the n (%) with the percentage sign in the string, <code>n_perc0</code> omits the percentage sign from the string. The latter is good for table, the former for in-line text.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">n_perc</span>(mtcars2$cyl ==<span class="st"> </span><span class="dv">4</span>)
## [1] &quot;11 (34.38%)&quot;
<span class="kw">n_perc0</span>(mtcars2$cyl ==<span class="st"> </span><span class="dv">4</span>)
## [1] &quot;11 (34)&quot;

<span class="kw">n_perc</span>(mtcars2$cyl_factor ==<span class="st"> </span><span class="dv">4</span>)  <span class="co"># this returns 0 (0.00%) </span>
## [1] &quot;0 (0.00%)&quot;
<span class="kw">n_perc</span>(mtcars2$cyl_factor ==<span class="st"> &quot;4 cylinders&quot;</span>)
## [1] &quot;11 (34.38%)&quot;
<span class="kw">n_perc</span>(mtcars2$cyl_factor ==<span class="st"> </span><span class="kw">levels</span>(mtcars2$cyl_factor)[<span class="dv">2</span>]) 
## [1] &quot;11 (34.38%)&quot;

<span class="co"># The count and percentage of 4 or 6 cylinders vehicles in the data set is</span>
<span class="kw">n_perc</span>(mtcars2$cyl %in%<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">6</span>))
## [1] &quot;18 (56.25%)&quot;</code></pre></div>
</div>
</div>
<div id="building-a-data-summary-table" class="section level1">
<h1>Building a Data Summary Table</h1>
<p>Objective: build a table reporting summary statistics for some of the variables in the <code>mtcars2</code> <code>data.frame</code> overall, and within subgroups. We’ll start with something very simple and build up to something bigger.</p>
<p>Let’s report the min, max, and mean (sd) for continuous variables and n (%) for categorical variables. We will report <code>mpg</code>, <code>disp</code>, <code>wt</code>, and <code>gear</code> overall and by number of cylinders.</p>
<p>The function <code>summary_table</code>, along with some <code>dplyr</code> functions will do the work for us. <code>summary_table</code> takes two arguments:</p>
<ol style="list-style-type: decimal">
<li><code>.data</code> a (<code>grouped_df</code>) data.frame</li>
<li><code>summaries</code> a list of summaries. This is a list-of-lists. The outer list defines the row groups and the inner lists define the specif summaries.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">args</span>(summary_table)
## function (.data, summaries) 
## NULL</code></pre></div>
<p>Let’s build a list-of-lists to pass to the <code>summaries</code> argument of <code>summary_table</code>. The inner lists are named <code>formula</code>e defining the wanted summary. These <code>formula</code>e are passed through <code>dplyr::summarize_</code> to generate the table. The names are important, as they are used to label row groups and row names in the table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">our_summary1 &lt;-<span class="st"> </span>
<span class="st">  </span><span class="kw">list</span>(<span class="st">&quot;Miles Per Gallon&quot;</span> =<span class="st"> </span>
<span class="st">       </span><span class="kw">list</span>(<span class="st">&quot;min&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span><span class="kw">min</span>(mpg), 
            <span class="st">&quot;max&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span><span class="kw">max</span>(mpg),
            <span class="st">&quot;mean (sd)&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span>qwraps2::<span class="kw">mean_sd</span>(mpg)),
       <span class="st">&quot;Displacement&quot;</span> =<span class="st"> </span>
<span class="st">       </span><span class="kw">list</span>(<span class="st">&quot;min&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span><span class="kw">min</span>(disp), 
            <span class="st">&quot;max&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span><span class="kw">max</span>(disp),
            <span class="st">&quot;mean (sd)&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span>qwraps2::<span class="kw">mean_sd</span>(disp)),
       <span class="st">&quot;Weight (1000 lbs)&quot;</span> =<span class="st"> </span>
<span class="st">       </span><span class="kw">list</span>(<span class="st">&quot;min&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span><span class="kw">min</span>(wt), 
            <span class="st">&quot;max&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span><span class="kw">max</span>(wt),
            <span class="st">&quot;mean (sd)&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span>qwraps2::<span class="kw">mean_sd</span>(wt)),
       <span class="st">&quot;Forward Gears&quot;</span> =<span class="st"> </span>
<span class="st">       </span><span class="kw">list</span>(<span class="st">&quot;Three&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span>qwraps2::<span class="kw">n_perc0</span>(gear ==<span class="st"> </span><span class="dv">3</span>),
            <span class="st">&quot;Four&quot;</span>  =<span class="st"> </span><span class="er">~</span><span class="st"> </span>qwraps2::<span class="kw">n_perc0</span>(gear ==<span class="st"> </span><span class="dv">4</span>),
            <span class="st">&quot;Five&quot;</span>  =<span class="st"> </span><span class="er">~</span><span class="st"> </span>qwraps2::<span class="kw">n_perc0</span>(gear ==<span class="st"> </span><span class="dv">5</span>))
       ) </code></pre></div>
<p>Building the table is done with a call to <code>summary_table</code>:</p>
<div id="overall" class="section level3">
<h3>Overall</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary_table</span>(mtcars2, our_summary1)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">mtcars2 (N = 32)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Miles Per Gallon</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">10.4</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">33.9</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">20.09 ± 6.03</td>
</tr>
<tr class="odd">
<td align="left"><strong>Displacement</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">71.1</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">472</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">230.72 ± 123.94</td>
</tr>
<tr class="odd">
<td align="left"><strong>Weight (1000 lbs)</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">1.513</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">5.424</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">3.22 ± 0.98</td>
</tr>
<tr class="odd">
<td align="left"><strong>Forward Gears</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   Three</td>
<td align="left">15 (47)</td>
</tr>
<tr class="odd">
<td align="left">   Four</td>
<td align="left">12 (38)</td>
</tr>
<tr class="even">
<td align="left">   Five</td>
<td align="left">5 (16)</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary_table</span>(mtcars2, our_summary1)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">mtcars2 (N = 32)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Miles Per Gallon</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">10.4</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">33.9</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">20.09 ± 6.03</td>
</tr>
<tr class="odd">
<td align="left"><strong>Displacement</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">71.1</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">472</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">230.72 ± 123.94</td>
</tr>
<tr class="odd">
<td align="left"><strong>Weight (1000 lbs)</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">1.513</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">5.424</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">3.22 ± 0.98</td>
</tr>
<tr class="odd">
<td align="left"><strong>Forward Gears</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   Three</td>
<td align="left">15 (47)</td>
</tr>
<tr class="odd">
<td align="left">   Four</td>
<td align="left">12 (38)</td>
</tr>
<tr class="even">
<td align="left">   Five</td>
<td align="left">5 (16)</td>
</tr>
</tbody>
</table>
</div>
<div id="by-number-of-cylinders" class="section level3">
<h3>By number of Cylinders</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary_table</span>(dplyr::<span class="kw">group_by</span>(mtcars2, cyl_factor), our_summary1)</code></pre></div>
<table>
<colgroup>
<col width="19%"></col>
<col width="26%"></col>
<col width="27%"></col>
<col width="27%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">cyl_factor: 6 cylinders (N = 7)</th>
<th align="left">cyl_factor: 4 cylinders (N = 11)</th>
<th align="left">cyl_factor: 8 cylinders (N = 14)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Miles Per Gallon</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">17.8</td>
<td align="left">21.4</td>
<td align="left">10.4</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">21.4</td>
<td align="left">33.9</td>
<td align="left">19.2</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">19.74 ± 1.45</td>
<td align="left">26.66 ± 4.51</td>
<td align="left">15.10 ± 2.56</td>
</tr>
<tr class="odd">
<td align="left"><strong>Displacement</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">145.0</td>
<td align="left">71.1</td>
<td align="left">275.8</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">258.0</td>
<td align="left">146.7</td>
<td align="left">472.0</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">183.31 ± 41.56</td>
<td align="left">105.14 ± 26.87</td>
<td align="left">353.10 ± 67.77</td>
</tr>
<tr class="odd">
<td align="left"><strong>Weight (1000 lbs)</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">2.620</td>
<td align="left">1.513</td>
<td align="left">3.170</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">3.460</td>
<td align="left">3.190</td>
<td align="left">5.424</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">3.12 ± 0.36</td>
<td align="left">2.29 ± 0.57</td>
<td align="left">4.00 ± 0.76</td>
</tr>
<tr class="odd">
<td align="left"><strong>Forward Gears</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   Three</td>
<td align="left">2 (29)</td>
<td align="left">1 (9)</td>
<td align="left">12 (86)</td>
</tr>
<tr class="odd">
<td align="left">   Four</td>
<td align="left">4 (57)</td>
<td align="left">8 (73)</td>
<td align="left">0 (0)</td>
</tr>
<tr class="even">
<td align="left">   Five</td>
<td align="left">1 (14)</td>
<td align="left">2 (18)</td>
<td align="left">2 (14)</td>
</tr>
</tbody>
</table>
<p>If you want to change the column names do so via the <code>cnames</code> argument to <code>qable</code> via the print method for <code>qwraps2_summary_table</code> objects. Any argument that you want to send to <code>qable</code> can be sent there when explicitly using the <code>print</code> method for <code>qwraps2_summary_table</code> objects.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">summary_table</span>(dplyr::<span class="kw">group_by</span>(mtcars2, cyl_factor), our_summary1), 
      <span class="dt">rtitle =</span> <span class="st">&quot;Summary Statistics&quot;</span>,
      <span class="dt">cnames =</span> <span class="kw">c</span>(<span class="st">&quot;Col 1&quot;</span>, <span class="st">&quot;Col 2&quot;</span>, <span class="st">&quot;Col 3&quot;</span>))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Summary Statistics</th>
<th align="left">Col 1</th>
<th align="left">Col 2</th>
<th align="left">Col 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Miles Per Gallon</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">17.8</td>
<td align="left">21.4</td>
<td align="left">10.4</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">21.4</td>
<td align="left">33.9</td>
<td align="left">19.2</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">19.74 ± 1.45</td>
<td align="left">26.66 ± 4.51</td>
<td align="left">15.10 ± 2.56</td>
</tr>
<tr class="odd">
<td align="left"><strong>Displacement</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">145.0</td>
<td align="left">71.1</td>
<td align="left">275.8</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">258.0</td>
<td align="left">146.7</td>
<td align="left">472.0</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">183.31 ± 41.56</td>
<td align="left">105.14 ± 26.87</td>
<td align="left">353.10 ± 67.77</td>
</tr>
<tr class="odd">
<td align="left"><strong>Weight (1000 lbs)</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">2.620</td>
<td align="left">1.513</td>
<td align="left">3.170</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">3.460</td>
<td align="left">3.190</td>
<td align="left">5.424</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">3.12 ± 0.36</td>
<td align="left">2.29 ± 0.57</td>
<td align="left">4.00 ± 0.76</td>
</tr>
<tr class="odd">
<td align="left"><strong>Forward Gears</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   Three</td>
<td align="left">2 (29)</td>
<td align="left">1 (9)</td>
<td align="left">12 (86)</td>
</tr>
<tr class="odd">
<td align="left">   Four</td>
<td align="left">4 (57)</td>
<td align="left">8 (73)</td>
<td align="left">0 (0)</td>
</tr>
<tr class="even">
<td align="left">   Five</td>
<td align="left">1 (14)</td>
<td align="left">2 (18)</td>
<td align="left">2 (14)</td>
</tr>
</tbody>
</table>
</div>
<div id="easy-building-of-the-summaries" class="section level2">
<h2>Easy building of the summaries</h2>
<p>The task building the <code>summaries</code> list-of-lists can be tedious. <code>tab_summary</code> is provided to help with that. For <code>numeric</code> variable, <code>tab_summary</code> will provide the <code>formula</code>e for the min, median (iqr), mean (sd), and max. <code>factor</code> and <code>character</code> vectors will have calls to <code>qwraps2::n_perc</code> for all levels provided.</p>
<p>For version 0.2.3.9000 or beyond, arguments have been added to <code>tab_summary</code> to help control some of the formatting of counts and percentages. The original behavior of <code>tab_summary</code> used <code>n_perc0</code> to format the summary of categorical variables. Now, <code>n_perc</code> is called and the end user can specify formatting options via a <code>list</code> passed via the <code>n_perc_args</code> argument. The default settings for <code>tab_summary</code> is below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">args</span>(tab_summary)
## function (x, n_perc_args = list(digits = 0, show_symbol = FALSE), 
##     envir = parent.frame()) 
## NULL</code></pre></div>
<p>These options will make the output look as if <code>n_perc0</code> had been called instead of <code>n_perc</code>. More importantly, these defaults <em>will not</em> honor the <code>options()$qwraps2_frmt_digits</code>.</p>
<p>Examples for <code>tab_summary</code> follow:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tab_summary</span>(mtcars2$mpg)
## $min
## ~min(mtcars2$mpg)
## 
## $`median (IQR)`
## ~qwraps2::median_iqr(mtcars2$mpg)
## 
## $`mean (sd)`
## ~qwraps2::mean_sd(mtcars2$mpg)
## 
## $max
## ~max(mtcars2$mpg)

<span class="kw">tab_summary</span>(mtcars2$gear) <span class="co"># gear is a numeric vector!</span>
## $min
## ~min(mtcars2$gear)
## 
## $`median (IQR)`
## ~qwraps2::median_iqr(mtcars2$gear)
## 
## $`mean (sd)`
## ~qwraps2::mean_sd(mtcars2$gear)
## 
## $max
## ~max(mtcars2$gear)
<span class="kw">tab_summary</span>(<span class="kw">factor</span>(mtcars2$gear)) 
## $`3`
## ~qwraps2::n_perc(factor(mtcars2$gear) == &quot;3&quot;, digits = 0, show_symbol = FALSE)
## 
## $`4`
## ~qwraps2::n_perc(factor(mtcars2$gear) == &quot;4&quot;, digits = 0, show_symbol = FALSE)
## 
## $`5`
## ~qwraps2::n_perc(factor(mtcars2$gear) == &quot;5&quot;, digits = 0, show_symbol = FALSE)</code></pre></div>
<p>The <code>our_summary1</code> object can be recreated as follows. Some additional row groups are provided to show default behavior of <code>tab_summary</code>. <strong>Important:</strong> Note that the <code>tab_summary</code> are made while using <code>with</code>. Further explanation for this follows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">our_summary2 &lt;-<span class="st"> </span>
<span class="st">  </span><span class="kw">with</span>(mtcars2, 
       <span class="kw">list</span>(<span class="st">&quot;Miles Per Gallon&quot;</span> =<span class="st"> </span><span class="kw">tab_summary</span>(mpg)[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)],
            <span class="st">&quot;Displacement (default summary)&quot;</span> =<span class="st"> </span><span class="kw">tab_summary</span>(disp),
            <span class="st">&quot;Displacement&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="kw">tab_summary</span>(disp)[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)],
                               <span class="st">&quot;mean (95% CI)&quot;</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span><span class="kw">frmtci</span>(qwraps2::<span class="kw">mean_ci</span>(disp))),
            <span class="st">&quot;Weight (1000 lbs)&quot;</span> =<span class="st"> </span><span class="kw">tab_summary</span>(wt)[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)],
            <span class="st">&quot;Forward Gears&quot;</span> =<span class="st"> </span><span class="kw">tab_summary</span>(<span class="kw">as.character</span>(gear))
            ))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">whole &lt;-<span class="st"> </span><span class="kw">summary_table</span>(mtcars2, our_summary2)
whole</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">mtcars2 (N = 32)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Miles Per Gallon</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">10.4</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">33.9</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">20.09 ± 6.03</td>
</tr>
<tr class="odd">
<td align="left"><strong>Displacement (default summary)</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">71.1</td>
</tr>
<tr class="odd">
<td align="left">   median (IQR)</td>
<td align="left">196.30 (120.83, 326.00)</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">230.72 ± 123.94</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">472</td>
</tr>
<tr class="even">
<td align="left"><strong>Displacement</strong></td>
<td align="left">  </td>
</tr>
<tr class="odd">
<td align="left">   min</td>
<td align="left">71.1</td>
</tr>
<tr class="even">
<td align="left">   max</td>
<td align="left">472</td>
</tr>
<tr class="odd">
<td align="left">   mean (sd)</td>
<td align="left">230.72 ± 123.94</td>
</tr>
<tr class="even">
<td align="left">   mean (95% CI)</td>
<td align="left">230.72 (187.78, 273.66)</td>
</tr>
<tr class="odd">
<td align="left"><strong>Weight (1000 lbs)</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">1.513</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">5.424</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">3.22 ± 0.98</td>
</tr>
<tr class="odd">
<td align="left"><strong>Forward Gears</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   3</td>
<td align="left">15 (47)</td>
</tr>
<tr class="odd">
<td align="left">   4</td>
<td align="left">12 (38)</td>
</tr>
<tr class="even">
<td align="left">   5</td>
<td align="left">5 (16)</td>
</tr>
</tbody>
</table>
<p>Group by multiple factors:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">grouped &lt;-<span class="st"> </span><span class="kw">summary_table</span>(dplyr::<span class="kw">group_by</span>(mtcars2, am, vs),  our_summary2)
grouped</code></pre></div>
<table>
<colgroup>
<col width="26%"></col>
<col width="18%"></col>
<col width="18%"></col>
<col width="18%"></col>
<col width="17%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">am: 0 vs: 0 (N = 12)</th>
<th align="left">am: 0 vs: 1 (N = 7)</th>
<th align="left">am: 1 vs: 0 (N = 6)</th>
<th align="left">am: 1 vs: 1 (N = 7)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Miles Per Gallon</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">10.4</td>
<td align="left">17.8</td>
<td align="left">15.0</td>
<td align="left">21.4</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">19.2</td>
<td align="left">24.4</td>
<td align="left">26.0</td>
<td align="left">33.9</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">15.05 ± 2.77</td>
<td align="left">20.74 ± 2.47</td>
<td align="left">19.75 ± 4.01</td>
<td align="left">28.37 ± 4.76</td>
</tr>
<tr class="odd">
<td align="left"><strong>Displacement (default summary)</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">275.8</td>
<td align="left">120.1</td>
<td align="left">120.3</td>
<td align="left">71.1</td>
</tr>
<tr class="odd">
<td align="left">   median (IQR)</td>
<td align="left">355.00 (296.95, 410.00)</td>
<td align="left">167.60 (143.75, 196.30)</td>
<td align="left">160.00 (148.75, 265.75)</td>
<td align="left">79.00 (77.20, 101.55)</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">357.62 ± 71.82</td>
<td align="left">175.11 ± 49.13</td>
<td align="left">206.22 ± 95.23</td>
<td align="left">89.80 ± 18.80</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">472</td>
<td align="left">258</td>
<td align="left">351</td>
<td align="left">121</td>
</tr>
<tr class="even">
<td align="left"><strong>Displacement</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="odd">
<td align="left">   min</td>
<td align="left">275.8</td>
<td align="left">120.1</td>
<td align="left">120.3</td>
<td align="left">71.1</td>
</tr>
<tr class="even">
<td align="left">   max</td>
<td align="left">472</td>
<td align="left">258</td>
<td align="left">351</td>
<td align="left">121</td>
</tr>
<tr class="odd">
<td align="left">   mean (sd)</td>
<td align="left">357.62 ± 71.82</td>
<td align="left">175.11 ± 49.13</td>
<td align="left">206.22 ± 95.23</td>
<td align="left">89.80 ± 18.80</td>
</tr>
<tr class="even">
<td align="left">   mean (95% CI)</td>
<td align="left">357.62 (316.98, 398.25)</td>
<td align="left">175.11 (138.72, 211.51)</td>
<td align="left">206.22 (130.02, 282.42)</td>
<td align="left">89.80 (75.87, 103.73)</td>
</tr>
<tr class="odd">
<td align="left"><strong>Weight (1000 lbs)</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">3.435</td>
<td align="left">2.465</td>
<td align="left">2.140</td>
<td align="left">1.513</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">5.424</td>
<td align="left">3.460</td>
<td align="left">3.570</td>
<td align="left">2.780</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">4.10 ± 0.77</td>
<td align="left">3.19 ± 0.35</td>
<td align="left">2.86 ± 0.49</td>
<td align="left">2.03 ± 0.44</td>
</tr>
<tr class="odd">
<td align="left"><strong>Forward Gears</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   3</td>
<td align="left">12 (100)</td>
<td align="left">3 (43)</td>
<td align="left">0 (0)</td>
<td align="left">0 (0)</td>
</tr>
<tr class="odd">
<td align="left">   4</td>
<td align="left">0 (0)</td>
<td align="left">4 (57)</td>
<td align="left">2 (33)</td>
<td align="left">6 (86)</td>
</tr>
<tr class="even">
<td align="left">   5</td>
<td align="left">0 (0)</td>
<td align="left">0 (0)</td>
<td align="left">4 (67)</td>
<td align="left">1 (14)</td>
</tr>
</tbody>
</table>
<p>As one table:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">both &lt;-<span class="st"> </span><span class="kw">cbind</span>(whole, grouped)
both</code></pre></div>
<table>
<colgroup>
<col width="22%"></col>
<col width="15%"></col>
<col width="15%"></col>
<col width="15%"></col>
<col width="15%"></col>
<col width="14%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">mtcars2 (N = 32)</th>
<th align="left">am: 0 vs: 0 (N = 12)</th>
<th align="left">am: 0 vs: 1 (N = 7)</th>
<th align="left">am: 1 vs: 0 (N = 6)</th>
<th align="left">am: 1 vs: 1 (N = 7)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Miles Per Gallon</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">10.4</td>
<td align="left">10.4</td>
<td align="left">17.8</td>
<td align="left">15.0</td>
<td align="left">21.4</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">33.9</td>
<td align="left">19.2</td>
<td align="left">24.4</td>
<td align="left">26.0</td>
<td align="left">33.9</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">20.09 ± 6.03</td>
<td align="left">15.05 ± 2.77</td>
<td align="left">20.74 ± 2.47</td>
<td align="left">19.75 ± 4.01</td>
<td align="left">28.37 ± 4.76</td>
</tr>
<tr class="odd">
<td align="left"><strong>Displacement (default summary)</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">71.1</td>
<td align="left">275.8</td>
<td align="left">120.1</td>
<td align="left">120.3</td>
<td align="left">71.1</td>
</tr>
<tr class="odd">
<td align="left">   median (IQR)</td>
<td align="left">196.30 (120.83, 326.00)</td>
<td align="left">355.00 (296.95, 410.00)</td>
<td align="left">167.60 (143.75, 196.30)</td>
<td align="left">160.00 (148.75, 265.75)</td>
<td align="left">79.00 (77.20, 101.55)</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">230.72 ± 123.94</td>
<td align="left">357.62 ± 71.82</td>
<td align="left">175.11 ± 49.13</td>
<td align="left">206.22 ± 95.23</td>
<td align="left">89.80 ± 18.80</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">472</td>
<td align="left">472</td>
<td align="left">258</td>
<td align="left">351</td>
<td align="left">121</td>
</tr>
<tr class="even">
<td align="left"><strong>Displacement</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="odd">
<td align="left">   min</td>
<td align="left">71.1</td>
<td align="left">275.8</td>
<td align="left">120.1</td>
<td align="left">120.3</td>
<td align="left">71.1</td>
</tr>
<tr class="even">
<td align="left">   max</td>
<td align="left">472</td>
<td align="left">472</td>
<td align="left">258</td>
<td align="left">351</td>
<td align="left">121</td>
</tr>
<tr class="odd">
<td align="left">   mean (sd)</td>
<td align="left">230.72 ± 123.94</td>
<td align="left">357.62 ± 71.82</td>
<td align="left">175.11 ± 49.13</td>
<td align="left">206.22 ± 95.23</td>
<td align="left">89.80 ± 18.80</td>
</tr>
<tr class="even">
<td align="left">   mean (95% CI)</td>
<td align="left">230.72 (187.78, 273.66)</td>
<td align="left">357.62 (316.98, 398.25)</td>
<td align="left">175.11 (138.72, 211.51)</td>
<td align="left">206.22 (130.02, 282.42)</td>
<td align="left">89.80 (75.87, 103.73)</td>
</tr>
<tr class="odd">
<td align="left"><strong>Weight (1000 lbs)</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   min</td>
<td align="left">1.513</td>
<td align="left">3.435</td>
<td align="left">2.465</td>
<td align="left">2.140</td>
<td align="left">1.513</td>
</tr>
<tr class="odd">
<td align="left">   max</td>
<td align="left">5.424</td>
<td align="left">5.424</td>
<td align="left">3.460</td>
<td align="left">3.570</td>
<td align="left">2.780</td>
</tr>
<tr class="even">
<td align="left">   mean (sd)</td>
<td align="left">3.22 ± 0.98</td>
<td align="left">4.10 ± 0.77</td>
<td align="left">3.19 ± 0.35</td>
<td align="left">2.86 ± 0.49</td>
<td align="left">2.03 ± 0.44</td>
</tr>
<tr class="odd">
<td align="left"><strong>Forward Gears</strong></td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   3</td>
<td align="left">15 (47)</td>
<td align="left">12 (100)</td>
<td align="left">3 (43)</td>
<td align="left">0 (0)</td>
<td align="left">0 (0)</td>
</tr>
<tr class="odd">
<td align="left">   4</td>
<td align="left">12 (38)</td>
<td align="left">0 (0)</td>
<td align="left">4 (57)</td>
<td align="left">2 (33)</td>
<td align="left">6 (86)</td>
</tr>
<tr class="even">
<td align="left">   5</td>
<td align="left">5 (16)</td>
<td align="left">0 (0)</td>
<td align="left">0 (0)</td>
<td align="left">4 (67)</td>
<td align="left">1 (14)</td>
</tr>
</tbody>
</table>
<div id="why-use-with-with-tab_summary" class="section level3">
<h3>Why use <code>with</code> with <code>tab_summary</code>?</h3>
<p><code>tab_summary</code> was written to help construct <code>formula</code>e to save the end user key strokes. There are plenty of reasons for <code>summary_table</code> to be used <em>without</em> <code>tab_summary</code>. However, when it is helpful to use <code>tab_summary</code> make sure you understand the results.</p>
<p>For example, let’s look at a simple summary of the miles per gallon.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># tab_summary(mpg)[[3]] ## this errors</span>
<span class="kw">tab_summary</span>(mtcars$mpg)[[<span class="dv">3</span>]]
## ~qwraps2::mean_sd(mtcars$mpg)
<span class="kw">with</span>(mtcars, <span class="kw">tab_summary</span>(mpg))[[<span class="dv">3</span>]]
## ~qwraps2::mean_sd(mpg)
## &lt;environment: 0x440f808&gt;</code></pre></div>
<p>The first call errors because <code>mpg</code> is not in the global environment. The difference between the second and third calls is subtle. The second call generates a <code>formula</code> with <code>mtcars$mpg</code> as an argument whereas the third call generates a <code>formula</code> with only <code>mpg</code> as the argument. The difference will be seen in the summary tables if the <code>.data</code> is sub setted.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The same tables:</span>
<span class="kw">summary_table</span>(mtcars, <span class="kw">list</span>(<span class="st">&quot;MPG 1&quot;</span> =<span class="st"> </span><span class="kw">with</span>(mtcars, <span class="kw">tab_summary</span>(mpg)[[<span class="dv">3</span>]])))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">mtcars (N = 32)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>MPG 1</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   qwraps2::mean_sd(mpg)</td>
<td align="left">20.09 ± 6.03</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary_table</span>(mtcars, <span class="kw">list</span>(<span class="st">&quot;MPG 2&quot;</span> =<span class="st"> </span><span class="kw">tab_summary</span>(mtcars$mpg)[[<span class="dv">3</span>]]))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">mtcars (N = 32)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>MPG 2</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   qwraps2::mean_sd(mtcars$mpg)</td>
<td align="left">20.09 ± 6.03</td>
</tr>
</tbody>
</table>
<p>These two calls generate the same table because the <code>.data</code> and the implied data within the second call are the same.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Different tables</span>
<span class="kw">summary_table</span>(dplyr::<span class="kw">filter</span>(mtcars, am ==<span class="st"> </span><span class="dv">0</span>), <span class="kw">list</span>(<span class="st">&quot;MPG 3&quot;</span> =<span class="st"> </span><span class="kw">with</span>(mtcars, <span class="kw">tab_summary</span>(mpg)[[<span class="dv">3</span>]])))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">dplyr::filter(mtcars, am == 0) (N = 19)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>MPG 3</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   qwraps2::mean_sd(mpg)</td>
<td align="left">17.15 ± 3.83</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary_table</span>(dplyr::<span class="kw">filter</span>(mtcars, am ==<span class="st"> </span><span class="dv">0</span>), <span class="kw">list</span>(<span class="st">&quot;MPG 4&quot;</span> =<span class="st"> </span><span class="kw">tab_summary</span>(mtcars$mpg)[[<span class="dv">3</span>]]))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">dplyr::filter(mtcars, am == 0) (N = 19)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>MPG 4</strong></td>
<td align="left">  </td>
</tr>
<tr class="even">
<td align="left">   qwraps2::mean_sd(mtcars$mpg)</td>
<td align="left">20.09 ± 6.03</td>
</tr>
</tbody>
</table>
<p>Now, the result of the second call above is not correct, it is the same as for the first two calls. This is because <code>mtcars$</code> is part of the <code>formula</code> and the <code>.data</code> is ignored. The correct result is in the table with <code>MPG 3</code>.</p>
<p>It is critical that you use <code>tab_summary</code> only as a took to help save you key strokes. I strongly encourage you, the end user, to use <code>summary_table</code> a lot, and use <code>tab_summary</code> as a quick tool for generating a script. It might be best if you use <code>tab_summary</code> to generate a template of the <code>formula</code>e you will want, copy the template into your script and editing accordingly.</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
